<div>
  paste:
  <textarea style="width:400px;height:300px" id="t"></textarea>

  <button id="copy">copy</button>
</div>


<script>
  (function () {
    const t = document.getElementById('t');


    document.getElementById('copy').addEventListener('click',(e)=>{
      t.select();
      document.execCommand('copy');
    });

    t.addEventListener('copy', (e) => {
      e.preventDefault();

     //Promise.resolve().then(()=>{
      e.clipboardData.setData('text/plain','i am plain text');
      e.clipboardData.setData('text/html','i am plain html');
      e.clipboardData.setData('test/custom','i am custom data');

      console.log('onCopy');
     //});
    });

    t.addEventListener('paste', (e) => {
      e.preventDefault();

      console.log('onPaste');
      const data = e.clipboardData;
      const items = data.items;

      for (const item of items) {
        console.log('****************************');
        console.log('item.kind:', item.kind);
        console.log('item.type:', item.type);
        console.log('item string:', data.getData(item.type))
        console.log('item.getAsFile:', item.getAsFile());
      }
    }, false);
  })();
</script>
